---
layout: post
title: c++20 concepts 예제..
date: '2021-09-24T16:30:00.004+09:00'
author: jeremyko
tags:
modified_time: '2021-09-24T16:30:44.140+09:00'
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-7397176465591266987
---

<p>별로 친절하지 않은 메시지 ??&nbsp; <br /></p><p>&nbsp;https://itnext.io/c-20-concepts-complete-guide-42c9e009c6bf</p><p>https://github.com/HappyCerberus/article-cpp20-concepts</p><p><br />//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// c++20<br />root:~/mydev/cpp&gt; g++-10 --version<br />g++-10 (Ubuntu 10.3.0-1ubuntu1~20.04) 10.3.0<br /><br />root:~/mydev/cpp&gt; g++-10 -std=c++2a -Wall -o test test.cpp<br />test.cpp: In function ‘int main()’:<br />test.cpp:14:28: error: use of function ‘void func_with_auto_inline(const auto:12&amp;) [with auto:12 = int]’ with unsatisfied constraints<br />&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp;&nbsp; func_with_auto_inline(1); // Fails<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^<br />test.cpp:8:6: note: declared here<br />&nbsp;&nbsp;&nbsp; 8 | void func_with_auto_inline(const std::convertible_to&lt;std::string&gt; auto&amp; x) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^~~~~~~~~~~~~~~~~~~~~<br />test.cpp:8:6: note: constraints not satisfied<br />In file included from /usr/include/c++/10/compare:39,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from /usr/include/c++/10/bits/stl_pair.h:65,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from /usr/include/c++/10/bits/stl_algobase.h:64,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from /usr/include/c++/10/bits/char_traits.h:39,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from /usr/include/c++/10/string:40,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from test.cpp:1:<br />/usr/include/c++/10/concepts: In instantiation of ‘void func_with_auto_inline(const auto:12&amp;) [with auto:12 = int]’:<br />test.cpp:14:28:&nbsp;&nbsp; required from here<br />/usr/include/c++/10/concepts:72:13:&nbsp;&nbsp; required for the satisfaction of ‘convertible_to&lt;auto:12, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;’ [with auto:12 = int]<br />/usr/include/c++/10/concepts:72:30: note: the expression ‘is_convertible_v&lt;_From, _To&gt; [with _From = int; _To = std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;]’ evaluated to ‘false’<br />&nbsp;&nbsp; 72 |&nbsp;&nbsp;&nbsp;&nbsp; concept convertible_to = is_convertible_v&lt;_From, _To&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><br />////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////<br />root:~/mydev/cpp&gt; g++ --version<br />g++ (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0<br /><br /><br />root:~/mydev/cpp&gt; g++ -std=c++14 -fconcepts -Wall -o test test.cpp<br />test.cpp: In instantiation of ‘void function_without_concept(const auto:1&amp;) [with auto:1 = int]’:<br />test.cpp:13:31:&nbsp;&nbsp; required from here<br />test.cpp:5:17: error: conversion from ‘const int’ to non-scalar type ‘std::string’ {aka ‘std::__cxx11::basic_string&lt;char&gt;’} requested<br />&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp; std::string v = x;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^<br /><br /><br />////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////<br />// test.cpp<br /><br />#include &lt;string&gt;<br />//#include &lt;concepts&gt;<br /><br />void function_without_concept(const auto&amp; x) {<br />&nbsp;&nbsp;&nbsp; std::string v = x;<br />}<br /><br />//void func_with_auto_inline(const std::convertible_to&lt;std::string&gt; auto&amp; x) {<br />//&nbsp;&nbsp;&nbsp; std::string v = x;<br />//}<br /><br />int main() {<br />&nbsp;&nbsp;&nbsp; function_without_concept(1);<br />&nbsp;&nbsp;&nbsp; //func_with_auto_inline(1); // Fails<br />&nbsp;&nbsp;&nbsp; return 0;<br />}<br /><br /></p>