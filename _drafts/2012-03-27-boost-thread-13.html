---
layout: post
title: boost - thread (1/3)
date: '2012-03-27T17:52:00.001+09:00'
author: jeremyko
tags:
- cpp
- boost
modified_time: '2016-12-31T15:20:36.716+09:00'
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-1460744654237275635
blogger_orig_url: https://jeremyko.blogspot.com/2012/03/boost-thread-13.html
---

<span style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;">Copyright © 2008-2010 Boris Schäling</span><br /><div style="background-color: white; color: #333333; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">이글은 다음 사이트 내용을 참조로 작성되었고. 개인적인 Study 목적으로 작성되었습니다.</span></div><div style="background-color: white; color: #333333; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">The contents of this page are constructed with reference to the following site and&nbsp;</span><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">translated just for personal academic study only</span><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">. &nbsp;</span></div><div style="background-color: white; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><b style="font-family: arial, helvetica, sans-serif;"><span style="background-color: white; font-family: Arial, helvetica, sans-serif; text-decoration: none;"><a href="http://en.highscore.de/cpp/boost/" style="text-decoration: none;" target="_blank"><span style="color: #999999;">http://en.highscore.de/cpp/boost/</span></a></span></b></div><span style="color: #999999;"><span style="font-family: Arial, Helvetica, sans-serif; font-size: xx-small;"><a href="http://drdobbs.com/article/print?articleId=211600441&amp;siteSectionName=cpp" target="_blank">http://drdobbs.com/article/print?articleId=211600441&amp;siteSectionName=cpp</a></span></span><br /><span style="color: #999999;"><span style="font-family: Arial, Helvetica, sans-serif; font-size: xx-small;"><a href="http://www.boost.org/doc/libs/1_41_0/doc/html/thread/thread_management.html#thread.thread_management.threadgroup">http://www.boost.org/doc/libs/1_41_0/doc/html/thread/thread_management.html#thread.thread_management.threadgroup</a></span></span><br /><br /><br /><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #006699; font-family: Arial, helvetica, sans-serif; font-size: small;"><b>boost::thread</b></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">OS간 포터블한 쓰레드 처리를 위해서 유용하다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">사용법은 다음과 같다. boost::thread 생성자에 쓰레드로 동작할 함수를 전달하면,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">생성즉시 thread()가 동작한다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"></span><br /><a name='more'></a><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/thread.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;iostream&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">void wait(int seconds)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>boost::this_thread::sleep(boost::posix_time::seconds(seconds));</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">void thread()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>for (int i = 0; i &lt; 5; ++i)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp; &nbsp; wait(1);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp; &nbsp; std::cout &lt;&lt; i &lt;&lt; std::endl;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>boost::thread t(thread);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>t.join(); //thread()가 종료할때까지 blocking된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">t변수를 이용해서 생성된 쓰레드에 접근할수 있다. 그런데, t변수가 스코프를</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">벗어나서 삭제되더라도 쓰레드 함수는 계속 동작한다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">쓰레드는 언제나 boost::thread 타입의 변수에 바인드되지만, 한번 생성되고 난 이후에는</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">그 변수에 의존적이지 않다. detach() 함수를 이용하면 이러한 boost::thread 타입</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">변수도 불필요하다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">위의 예제가 쓰레드종료를 기다리는 경우라면, 다음은 인터럽트되는 경우를 보여준다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/thread.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;iostream&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">void wait(int seconds)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>boost::this_thread::sleep(boost::posix_time::seconds(seconds));</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">void thread()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>try</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp; &nbsp; for (int i = 0; i &lt; 5; ++i)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp; &nbsp; {</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;">  </span>wait(1);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;">  </span></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;">  </span>std::cout &lt;&lt;"thread:"&lt;&lt; boost::this_thread::get_id()&lt;&lt;" "&lt;&lt; i &lt;&lt; std::endl;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp; &nbsp; }</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>catch (boost::thread_interrupted&amp;)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;">  </span>std::cout &lt;&lt; "thread interrupted" &lt;&lt; std::endl;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><span class="Apple-tab-span" style="white-space: pre;"> </span>std::cout &lt;&lt; boost::thread::hardware_concurrency() &lt;&lt; std::endl; //동시에 실행가능한 쓰레드 갯수</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; std::cout &lt;&lt;"(main)thread main id:" &lt;&lt; boost::this_thread::get_id()&lt;&lt; std::endl; &nbsp; &nbsp;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>boost::thread t(thread);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; std::cout &lt;&lt;"(main)thread id:" &lt;&lt; t.get_id()&lt;&lt; std::endl; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>wait(3);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>t.interrupt();</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>t.join();</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">출력:</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">(main)thread main id:001696A8</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">(main)thread id:00169C70</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">thread:00169C70 0</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">thread:00169C70 1</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">thread:00169C70 2</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">thread interrupted</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">스레드 객체에 대해서 interrupt()를 호출하면, 그 쓰레드는 인터럽트된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이것은 해당 쓰레드에서 boost::thread_interrupted 예외를 발생 시키게 한다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">중요한점은, 이것은 쓰레드가 interruption point에 도달해야지만 발생된다는 것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">만약 쓰레드가 interruption point를 가지고 있지 않다면, interrupt()를 호출해도</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">아무것도 발생되지 않는다. 쓰레드는 interruption point에 도착할때마다,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">interrupt()가 호출되었는지를 확인할것이고, 호출된경우 boost::thread_interrupted</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">예외가 전달될것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">Boost thread는 다음과 같은 interruption point를 정의하고 있다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost::thread::join()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost::thread::timed_join()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost::condition_variable::wait()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost::condition_variable::timed_wait()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost::condition_variable_any::wait()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost::condition_variable_any::timed_wait()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost::thread::sleep()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost::this_thread::sleep()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost::this_thread::interruption_point()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">위의 예에서 sleep()은 5번 호출되고 있는데,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이경우에만 interrupt()호출 여부를 확인할것이고, 그외 시간에는 쓰레드는 인터럽트 되지 않는다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><br /></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left;"><div style="line-height: 18px;"><span style="color: #006699; font-family: Arial, helvetica, sans-serif;"><b>boost::this_thread::disable_interruption</b></span></div><div style="line-height: 18px;"><span style="color: #006699; font-family: Arial, helvetica, sans-serif;"><b>boost::this_thread::restore_interruption</b></span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">쓰레드내에서 임시 객체를 선언하면 인터럽트되는것을 조정할수 있다.</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">void g()</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; // interruption enabled here</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; {</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; boost::this_thread::disable_interruption di;</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; // interruption disabled</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; {</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; boost::this_thread::restore_interruption ri(di);</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // interruption now enabled</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; } // ri destroyed, interruption disable again</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; } // di destroyed, interruption state restored</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; // interruption now enabled</span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="line-height: 18px;"><br /></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;"><b><span style="color: #006699;">쓰레드 생성시, 함수에 입력인자 전달</span></b></span></div><div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;"></span></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">void thread_func &nbsp; (int i,double d,std::string s)</span></div><span style="font-family: Arial, helvetica, sans-serif;"></span><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><span style="font-family: Arial, helvetica, sans-serif;"></span><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; std::cout &lt;&lt; i&lt;&lt;":"&lt;&lt;d&lt;&lt;":"&lt;&lt;s&lt;&lt; std::endl;</span></div><span style="font-family: Arial, helvetica, sans-serif;"></span><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><span style="font-family: Arial, helvetica, sans-serif;"></span><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><span style="font-family: Arial, helvetica, sans-serif;"></span><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">int main()</span></div><span style="font-family: Arial, helvetica, sans-serif;"></span><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><span style="font-family: Arial, helvetica, sans-serif;"></span><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::thread t(thread_func, 42,3.141,"hello world");</span></div><span style="font-family: Arial, helvetica, sans-serif;"></span><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; t.join();</span></div><span style="font-family: Arial, helvetica, sans-serif;"></span><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><span style="font-family: Arial, helvetica, sans-serif;"><div style="line-height: 18px;"><br /></div><div style="line-height: 18px;">인자는 모두 복사되어져서 전달되므로 , 참조자를 넘기는 경우는</div><div style="line-height: 18px;"><span style="line-height: normal;">boost::ref()를 이용한다.</span></div><div style="line-height: 18px;"><span style="line-height: normal;"><br /></span></div><div style="line-height: 18px;"><span style="line-height: normal;">int i;</span></div><div style="line-height: 18px;"><span style="line-height: normal;">void thread_func(int&amp; j);</span></div><div style="line-height: 18px;"><span style="line-height: normal;">boost::thread t (thread_func,boost::ref(i));</span></div><div style="line-height: 18px;"><span style="line-height: normal;"><br /></span></div><div style="line-height: 18px;"><b><span style="color: #006699; font-size: small;"><span style="font-family: monospace; line-height: normal;">Movable</span>&nbsp;</span></b><span style="line-height: normal;"><br /></span></div><div style="line-height: 18px;"><span style="line-height: normal;">boost::thread 인스턴스간에는 소유권 이전이 가능하다.</span></div><div style="line-height: 18px;"><span style="line-height: normal;"><br /></span></div><div><div style="line-height: 18px;"><span style="line-height: normal;">#include &lt;boost/thread.hpp&gt;</span></div><div style="line-height: 18px;"><span style="line-height: normal;">#include &lt;iostream&gt;</span></div><div><br /></div><div style="line-height: 18px;"><span style="line-height: normal;">void some_function()</span></div><div style="line-height: 18px;"><span style="line-height: normal;">{</span></div><div style="line-height: 18px;"><span style="line-height: normal;">&nbsp; &nbsp; std::cout &lt;&lt; "some_function..."&lt;&lt; std::endl;</span></div><div style="line-height: 18px;"><span style="line-height: normal;">}</span></div><div style="line-height: 18px;"><span style="line-height: normal;"><br /></span></div><div style="line-height: 18px;"><span style="line-height: normal;">boost::thread create_thread()</span></div><div style="line-height: 18px;"><span style="line-height: normal;">{ &nbsp; &nbsp;</span></div><div style="line-height: 18px;"><span style="line-height: normal;">&nbsp; &nbsp; boost::thread t(some_function);</span></div><div style="line-height: 18px;"><span style="line-height: normal;"><br /></span></div><div style="line-height: 18px;"><span style="line-height: normal;">&nbsp; &nbsp; return boost::move(t);</span></div><div style="line-height: 18px;"><span style="line-height: normal;">}</span></div><div style="line-height: 18px;"><span style="line-height: normal;"><br /></span></div><div style="line-height: 18px;"><span style="line-height: normal;">boost::thread threads[45];</span></div><div style="line-height: 18px;"><span style="line-height: normal;"><br /></span></div><div style="line-height: 18px;"><span style="line-height: normal;">int main()</span></div><div style="line-height: 18px;"><span style="line-height: normal;">{</span></div><div style="line-height: 18px;"><span style="line-height: normal;">&nbsp; &nbsp; threads[12] = boost::move( create_thread() );</span></div><div style="line-height: 18px;"><span style="line-height: normal;">&nbsp; &nbsp; threads[12].join();</span></div><div style="line-height: 18px;"><span style="line-height: normal;">}</span></div></div><div style="line-height: 18px;"><span style="line-height: normal;"><br /></span></div></span><br /><div style="line-height: 18px;"></div></div></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">그밖에</span></div><div style="line-height: 18px;"><b><span style="color: #006699; font-family: Arial, helvetica, sans-serif;">boost::thread_group</span></b></div><div style="line-height: 18px;"><span style="font-family: Arial, helvetica, sans-serif;">interrupt_all(), join_all() 등의 메서드 존재.</span></div></div>