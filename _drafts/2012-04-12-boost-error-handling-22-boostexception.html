---
layout: post
title: boost - Error Handling (2/2) Boost.Exception
date: '2012-04-12T13:40:00.003+09:00'
author: jeremyko
tags:
- cpp
- boost
modified_time: '2016-12-31T15:20:02.494+09:00'
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-241707727123119656
blogger_orig_url: https://jeremyko.blogspot.com/2012/04/boost-error-handling-22-boostexception.html
---

<br /><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><div><span style="font-family: Arial, helvetica, sans-serif;">Copyright © 2008-2010 Boris Schäling</span></div><div><div style="color: #333333;"><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">이글은 다음 사이트 내용을 참조로 작성되었고. 개인적인 Study 목적으로 작성되었습니다.</span></div><div style="color: #333333; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif;"><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">The contents of this page are constructed with reference to the following site and&nbsp;</span><span style="color: #999999; font-family: Arial, helvetica, sans-serif;">translated just for personal academic study only</span><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">. &nbsp;</span><b style="font-family: arial, helvetica, sans-serif;"><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;"><a href="http://en.highscore.de/cpp/boost/" style="color: #7d181e; text-decoration: none;" target="_blank">http://en.highscore.de/cpp/boost/</a></span></b></div></div></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><span style="color: #006699; font-size: small;"><b>boost::exception</b></span></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">Boost.Exception 라이브러리는 발생한 예외에 추가 정보를 저장할수 있는</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">새로운 boost::exception 예외타입을 제공한다.&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">여러개의 헤더파일에 클래스와 함수들이 나눠져있기 때문에,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">개별 파일을 일일이&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">포함시키는 수고를 덜기 위해, 다음 예제에서는 boost/exception/all.hpp 를 포함했다.</span></div><div style="background-color: white; color: #555555; font-size: 12px; line-height: 18px; text-align: left;"><div style="font-family: arial, helvetica, sans-serif;"></div><span style="font-family: Arial, helvetica, sans-serif;"></span><br /><a name='more'></a><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/exception/all.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/lexical_cast.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/shared_array.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;exception&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;string&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;iostream&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">typedef boost::error_info&lt;struct tag_errmsg, std::string&gt; errmsg_info;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">class allocation_failed : public boost::exception, public std::exception</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">public: allocation_failed(std::size_t size)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>: what_("allocation of " + boost::lexical_cast&lt;std::string&gt;(size) + " bytes failed")</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>virtual const char *what() const throw()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>return what_.c_str();</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">private:</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>std::string what_;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">};</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">boost::shared_array&lt;char&gt; allocate(std::size_t size)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>if (size &gt; 1000)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>throw allocation_failed(size);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>return boost::shared_array&lt;char&gt;(new char[size]);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">void save_configuration_data()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>try</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><span class="Apple-tab-span" style="white-space: pre;">  </span>boost::shared_array&lt;char&gt; a = allocate(2000);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>// saving configuration data ...</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>catch (boost::exception &amp;e)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>e &lt;&lt; errmsg_info("saving configuration data failed"); //정보 추가</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>throw;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>try</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>save_configuration_data();</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>catch (boost::exception &amp;e)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>std::cerr &lt;&lt; boost::diagnostic_information(e);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">출력:</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">Throw location unknown (consider using BOOST_THROW_EXCEPTION)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">Dynamic exception type: class allocation_failed</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">std::exception::what: allocation of 2000 bytes failed</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">[struct tag_errmsg *] = saving configuration data failed</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">예제에서 main은 save_configuration_data()를 호출하고,&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">이는 allocate()함수를 다시 호출하게 된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">allocate()함수에서는 메모리가 동적으로 할당되며,&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">이때 할당 제한조건 1,000 바이트를 넘는 경우</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">save_configuration_data() 내부로 예외가 던져진다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">allocate()에 의해 던져지는 allocation_failed 타입의 예외는</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">boost::exception 와 std::exception 모두를 상속 받았다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">std::exception을 상속받는것은 꼭 필요한것은 아니다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">allocation_failed는 기존 프레임워크에 끼워넣기 위해 다른 클래스들을&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">상속받을수도 있을 것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">위 예제에서는 C++표준에 의거한 클래스 계층구조를 사용하고 있지만,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">boost::exception만을 상속받는것으로도 충분할것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">allocation_failed 타입의 예외가 주어질때,&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">디버깅에 도움이 되는 바이트 정보가 예외에 저장되었다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이를 통해, 예외의 원인(즉, 메모리 할당 한도 초과)이 무엇인지 쉽게 알수 있다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><span style="color: #006699; font-size: small;"><b>boost::error_info</b></span></span>&nbsp;<span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><br /></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">위와 같이 allocate()함수가 하나의 함수에서만 호출된다면,&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">이 정보는 문제점을 찾기에 충분하다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">그런데 좀더 복잡한 어플리케이션에서 많은 함수가 allocate()함수를 호출하는 경우라면,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이 정보만으로는 디버깅에 충분한 정보가 될수 없을 것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이때는 어떤 함수가 allocate()함수를 호출하면서,&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">한도 이상의 메모리를 요청했는지</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">아는것이 큰 도움이 될것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">좀 더 많은 정보를 예외에 포함시키는 것이 디버깅에 큰 도움이 될것인데,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">문제는 allocate()함수가 그러한 정보를 가지고 있지 않다는 것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이처럼, 추가적인 필요 정보를 예외에 추가하고자 하는 경우,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">추가할 각 정보들을 boost::error_info 타입으로 정의하고, 예외에 추가할 수 있다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">boost::error_info 은 템플릿 데이터 타입으로, 2개의 템플릿 인자가 필요하다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">첫번째는 일종의 tag 로, 새로 생성되는 데이터 타입을 유일하게 구분하기 위한 것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">보통 유일한 이름의 구조체가 사용된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">두번째 인자는 예외에 추가될 정보의 데이터 타입을 나타낸다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">예제에서, 새로운 데이터타입 errmsg_info을 정의하면서,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">std::string 추가 정보를 가지는 유일하게 구분가능한 tag_errmsg 구조체를 사용했다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">save_configuration_data() 의 catch 핸들러에서, tag_errmsg 객체가 생성된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">추가정보, "saving configuration data failed" 문자열을 저장하고 있고,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이 정보는 boost::exception 의 &lt;&lt; 연산자를 이용해서 예외에 추가된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">그리고 예외는 다시 던져(re-thrown)진다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이제, 예외는 초과 요청된 메모리의 바이트 정보뿐만 아니라,&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">호출한 측의 추가 문자열 정보도 가지게 되었다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이러한 호출자에 대한 추가 정보는 디버깅에 분명 큰 도움이 될것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #006699; font-family: Arial, helvetica, sans-serif; font-size: small;"><b>boost::diagnostic_information()</b></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">예외에서 모든 정보를 얻기 위해서는 boost::diagnostic_information() 를 사용한다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">예외가 주어질때마다, what() 메서드뿐 아니라 모든 추가정보에 접근한다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">위 예제에서는 std::string 을 리턴하고, 이는 표준 출력 스트림에 출력될것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">boost::diagnostic_information()은 예외가 std::exception 을 상속했는지 여부를</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">실행시간에 체크한다. 그리고 상속받은 경우에만 what()메서드가 호출된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #006699; font-family: Arial, helvetica, sans-serif; font-size: small;"><b>BOOST_THROW_EXCEPTION</b></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">예제 실행 경과에 , 예외를 발생시킨 함수명이 "unknown" 으로 나온것을 볼 수 있다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">---------------------------------------------------------------------------------------------------------------------</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">원문에서는 "Throw in function (unknown)" 으로 표기되었지만</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">boost 1.49.0, MS VC++ express 2010으로 실행시킨 결과는 좀더 친절하게</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="color: #8e8e8e; font-family: Arial, helvetica, sans-serif;">"Throw location unknown (consider using BOOST_THROW_EXCEPTION)" 가 출력된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><span style="color: #8e8e8e;">---------------------------------------------------------------------------------------------------------------------</span></span>&nbsp;<span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><br /></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">Boost.Exception 라이브러리는 예외를 발생시킨 함수명뿐만 아니라, 파일명, 호출라인 등의</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">추가정보를 보여줄수 있는 매크로를 제공하고 있다</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/exception/all.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/lexical_cast.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/shared_array.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;exception&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;string&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;iostream&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">typedef boost::error_info&lt;struct tag_errmsg, std::string&gt; errmsg_info;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">class allocation_failed : &nbsp;public std::exception</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">public: &nbsp;allocation_failed(std::size_t size)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp; : what_("allocation of " + boost::lexical_cast&lt;std::string&gt;(size) + " bytes failed")</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>virtual const char *what() const throw()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>return what_.c_str();</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">private:</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>std::string what_;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">};</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">boost::shared_array&lt;char&gt; allocate(std::size_t size)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>if (size &gt; 1000)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>BOOST_THROW_EXCEPTION(allocation_failed(size));</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>return boost::shared_array&lt;char&gt;(new char[size]);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">void save_configuration_data()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>try</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>boost::shared_array&lt;char&gt; a = allocate(2000);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>// saving configuration data ...</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>catch (boost::exception &amp;e)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>e &lt;&lt; errmsg_info("saving configuration data failed");</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>throw;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>try</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>save_configuration_data();</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>catch (boost::exception &amp;e)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>std::cerr &lt;&lt; boost::diagnostic_information(e);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">출력:</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">d:\kojh_data\dev\boost_error_handling\boost_error_handling\boost_error_handling.cpp(115):</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">Throw in function class boost::shared_ary&lt;char&gt; __cdecl allocate(unsigned int)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">Dynamic exception type: class boost::exception_detail::clone_impl&lt;class allocation_failed&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">std::exception::what: allocation of 2000 bytes failed</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">[struct tag_errmsg *] = saving configuration data failed</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이는 컴파일러가 C++ 표준인 __FILE__ 과 __LINE__ 매크로를 지원해야 가능하다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">함수명을 가져오기 위한 표준 매크로는 존재하지 않기 때문에,BOOST_THROW_EXCEPTION 은</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">해당 컴파일러를 구분하고 그에 맞는 매크로를 이용해서 처리한다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">위 예제에서는 allocation_failed 가 boost::exception을 더이상 상속받지 않았음에도</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">에러없이 컴파일 된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이는 BOOST_THROW_EXCEPTION 가 boost::enable_error_info() 이라는 함수를 이용해서</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">동적으로 예외가 boost::exception를 상속받았는지 구분하기 때문이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">만약 상속받지 않았다면, boost::exception 로를 상속받은 새로운 예외타입을 자동으로</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">생성한다. 이같은 동작 방식으로 인해, 위와같은 출력을 볼수 있는것이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><b><span style="color: #006699; font-size: small;">boost::get_error_info()</span></b></span>&nbsp;<span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><br /></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">마지막으로, 다음 예제에서는 예외에 추가된 정보들을&nbsp;</span><span style="font-family: Arial, helvetica, sans-serif;">개별적으로 접근하는 방법을 알수있다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/exception/all.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/lexical_cast.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;boost/shared_array.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;exception&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;string&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">#include &lt;iostream&gt;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">typedef boost::error_info&lt;struct tag_errmsg, std::string&gt; errmsg_info;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">class allocation_failed : public std::exception</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">public: allocation_failed(std::size_t size)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>: what_("allocation of " + boost::lexical_cast&lt;std::string&gt;(size) + " bytes failed")</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>virtual const char *what() const throw()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>return what_.c_str();</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">private:</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>std::string what_;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">};</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">boost::shared_array&lt;char&gt; allocate(std::size_t size)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>if (size &gt; 1000)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>BOOST_THROW_EXCEPTION(allocation_failed(size));</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>return boost::shared_array&lt;char&gt;(new char[size]);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">void save_configuration_data()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>try</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>boost::shared_array&lt;char&gt; a = allocate(2000);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>// saving configuration data ...</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>catch (boost::exception &amp;e)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>e &lt;&lt; errmsg_info("saving configuration data failed");</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>throw;</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>try</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>save_configuration_data();</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>catch (boost::exception &amp;e)</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>{</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp; &nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>std::cerr &lt;&lt; *boost::get_error_info&lt;errmsg_info&gt;(e);</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">&nbsp;&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">이 예제에서는 boost::diagnostic_information() 를 사용하지 않고, 대신</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">boost::get_error_info()를 이용해서 errmsg_info 타입의 에러메시지에 직접 접근했다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">boost::get_error_info() 는 boost::shared_ptr 타입의 스마트 포인터를 리턴한다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">넘겨진 인자가 boost::exception 타입이 아닌 경우에는 null 포인터가 리턴된다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">만약 BOOST_THROW_EXCEPTION 이 예외 전파에 항상 사용된다면,</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">그 예외는 boost::exception 타입을 상속받았음이 보장될것이고, 이경우엔 리턴값이</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Arial, helvetica, sans-serif;">null 인지 여부를 확인하지 않아도 된다.</span></div>