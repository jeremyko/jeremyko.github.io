---
layout: post
title:
date: '2012-12-10T18:14:00.001+09:00'
author: jeremyko
tags:
modified_time: '2012-12-10T18:14:39.196+09:00'
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-1835391441994444789
---

<b>그럼 node.js 가 멀티 코어의 이점을 충분히 활용 못한다는것은 어떤 의미인가?</b><br /><br />그건 주문을 받는 종업원이 한명뿐이라 손님들이 많으면 아무래도 기다려야 하기 때문이 아닐까(종업원이 주문을 거의 갈겨서 아무리 빨리 쓴다고 해도 ^^).<br /><br />그럼 만약 위 음식점이 2개의 주방(멀티코어)을 잘 활용한다면 어떻게 될까?<br />즉, <b>node.js 가 멀티코어를 잘 활용하는 상황</b>을 다시 가정 해보자.<br /><br /><span style="color: #0b5394;">이제는 이 식당이 홀 서빙 종업원을 2명 더 고용한 경우가 된다.&nbsp;</span><br /><span style="color: #0b5394;"><br /></span><span style="color: #0b5394;">아울러 주방에서 일할 요리사도 이전에 비해 2배로 많이 고용한 경우이다.&nbsp;</span><br /><span style="color: #0b5394;"><br /></span><span style="color: #0b5394;">주방 앞에는 각각의 서빙 종업원을 위해 요리접시를 내놓는 배식구가 별도로 마련 되어있다.</span><br /><span style="color: #0b5394;"><br /></span><span style="color: #0b5394;">몰려 들어오는 손님들은 먼저 사장님에 의해 골고루 서빙 종업원들에게 인도된다.</span><br /><span style="color: #0b5394;"><br /></span><span style="color: #0b5394;">한편 요리사들은 주문을 처리하기 위해 2개의 주방에 골고루 분산되며 주방공간을 너무 번잡스럽지 않을 정도까지 알뜰하게 활용한다.</span><br /><span style="color: #0b5394;"><br /></span><span style="color: #0b5394;">요리가 준비되면 요리사들은 자신에게 쪽지를 가져다준 바로 그 서빙 종업원의 배식구로 내놓는다.</span><br /><span style="color: #0b5394;"><br /></span><span style="color: #0b5394;">여러 요리사가 요리들를 내놓을 경우도 있지만, 그건 문제가 안된다.&nbsp;</span><br /><span style="color: #0b5394;">서빙 종업원 입장에서는 자신과 관련된 배식구에는 순차적으로 요리접시들이 나열되고,&nbsp;</span><br /><span style="color: #0b5394;">자신은 한번에 하나씩만 서빙하기 때문이다가.</span><br /><br /><b>그럼 node.js 에서 멀티코어를 충분히 활용하려면 어떻게 해야할까.</b><br /><br />현시점에서는&nbsp;<b>node.js의 인스턴스를 여러개 띄우는거나,&nbsp;</b><br /><b>child_process 모듈 혹은 좀더 간편하게 cluster 모듈로 자식 프로세스를 만드는 것</b>이 방안인것 같다.<br />(윈도우즈에서 IOCP 또한 동일한 멀티코어 활용 이슈가 있을것 같은데 그 방안이 뭔지도 한번 조사해봐야겠다.)<br /><div><br /></div>여 러 인스턴스를 만드는 경우는 웹서버등과 같이 동일한 기능의 서버를 클러스터링 하는 경우가 될수도 있고,&nbsp;혹은 DB서버, 채팅서버 등  &nbsp;서로 다른 기능을 수행하는 서버들을 위한 node.js &nbsp;인스턴스가 하나씩 기동되는 경우일수도 있다.<br /><br />포럼등을 살펴보면 node.js 커뮤니티에서도 이 멀티코어 관련된 많은 관심과 노력이 진행중이다.<br />향 후 버전에는 제한적이나마 네이티브 쓰레드 생성 기능이 추가될수도 있지 않을까?(이건 node.js 기본정신을 훼손시키는  경우?^^). 하지만 어떤식으로 변경이 되더라도&nbsp;node.js 가 가진 이점,&nbsp;즉 과도한 멀티쓰레딩으로 인한 골치아픈 문제없이 꽤  괜찮은 I/O 성능을 보여준다라는점을 훼손시키지 않으면서도, 멀티쓰레딩이나 멀티 프로세스가 가진 코어 활용의 이점을 본 받을수  있게끔 개선이 이루어 질것은 분명하다.<br /><br />