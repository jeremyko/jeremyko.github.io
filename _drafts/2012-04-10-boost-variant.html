---
layout: post
title: boost - variant
date: '2012-04-10T10:17:00.002+09:00'
author: jeremyko
tags:
- cpp
- boost
modified_time: '2016-12-31T15:20:02.506+09:00'
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-4050500277620676368
blogger_orig_url: https://jeremyko.blogspot.com/2012/04/boost-variant.html
---

<span style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;">Copyright © 2008-2010 Boris Schäling</span><br /><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><div style="color: #333333; font-family: arial, helvetica, sans-serif;"><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">이글은 다음 사이트 내용을 참조로 작성되었고. 개인적인 Study 목적으로 작성되었습니다.</span></div><div style="color: #333333; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif;"><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">The contents of this page are constructed with reference to the following site and&nbsp;</span><span style="color: #999999; font-family: Arial, helvetica, sans-serif;">translated just for personal academic study only</span><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;">. &nbsp;</span><b style="font-family: arial, helvetica, sans-serif;"><span style="background-color: white; color: #999999; font-family: Arial, helvetica, sans-serif;"><a href="http://en.highscore.de/cpp/boost/" style="color: #7d181e; text-decoration: none;" target="_blank">http://en.highscore.de/cpp/boost/</a></span></b></div></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><b style="font-family: arial, helvetica, sans-serif;"><b><span style="color: #006699; font-size: small;"><br /></span></b></b></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><span style="color: #006699; font-size: small;"><b>boost::variant</b></span></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">boost::any가 임의의 데이터 유형중 하나의 유형에 대한 값을 저장할 수 있는 것에 비해,</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">boost::variant 는 고정된 갯수의 데이터 유형중 하나를 저장할수 있다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;boost/variant.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::variant&lt;double, char&gt; v;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 3.14;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 'A';</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"></span><br /><a name='more'></a><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">위 예제에서는 v 안에 double 과 char 모두를 저장할수 있다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">만약 int를 저장하는 코드가 있다면 컴파일 되지 않을 것이다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">위 예제는 union을 이용해서도 구현 될수 있겠지만, union 으로는 클래스 멤버를</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">포함하는 것이 불가하다. 따라서 std::string 타입은 처리 할수 없을 것이다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;boost/variant.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;string&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::variant&lt;double, char, std::string&gt; v;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 3.14;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 'A';</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = "Hello, world!";</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">v에 저장된 값을 출력하기 위해서는 자유함수&nbsp;<b><span style="color: #177fcd;">boost::get()</span></b>&nbsp;이 사용된다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;boost/variant.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;string&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;iostream&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::variant&lt;double, char, std::string&gt; v;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 3.14;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; std::cout &lt;&lt; boost::get&lt;double&gt;(v) &lt;&lt; std::endl;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 'A';</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; std::cout &lt;&lt; boost::get&lt;char&gt;(v) &lt;&lt; std::endl;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = "Hello, world!";</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; std::cout &lt;&lt; boost::get&lt;std::string&gt;(v) &lt;&lt; std::endl;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">만약 boost::get()에 잘못된 템플릿 인자를 넘기는경우에는 런타임시 오류가 발생한다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">boost::variant 타입 변수는 스트림들에게 직접 쓰기가 가능하다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">이 경우에는 boost::get()에 잘못된 템플릿 인자를 넘기는 위험을 없앨수 있다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;boost/variant.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;string&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;iostream&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::variant&lt;double, char, std::string&gt; v;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 3.14;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; std::cout &lt;&lt; v &lt;&lt; std::endl;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 'A';</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; std::cout &lt;&lt; v &lt;&lt; std::endl;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = "Hello, world!";</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; std::cout &lt;&lt; v &lt;&lt; std::endl;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">다른 방법으로 값을 처리할수 있는데,&nbsp;<b><span style="color: #006699;">boost::apply_visitor()</span></b>&nbsp;함수가 제공된다</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;boost/variant.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;boost/any.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;vector&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;string&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;iostream&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">std::vector&lt;boost::any&gt; vector;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">struct output : public boost::static_visitor&lt;&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; void operator()(double &amp;d) const</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; {</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; vector.push_back(d);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; }</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; void operator()(char &amp;c) const</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; {</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; vector.push_back(c);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; }</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; void operator()(std::string &amp;s) const</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; {</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; vector.push_back(s);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; }</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">};</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::variant&lt;double, char, std::string&gt; v;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 3.14;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::apply_visitor(output(), v);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 'A';</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::apply_visitor(output(), v);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = "Hello, world!";</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::apply_visitor(output(), v);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">boost::apply_visitor()의 첫번째 인자로, boost::static_visitor를 상속받은</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">클래스 객체를 요구한다. 이 클래스는, boost::variant에 지정된 모든 데이터 유형에 대해,</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">operator()() 를 오버로딩 해야만 한다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">예제에서는 double, char 그리고 std::string 유형에대해 3번 연산자를 오버로딩했다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">자세히 보면 boost::static_visitor 는 템플릿인것을 알 수있다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">만약 오버로드된 operator()() 연산자가 값을 리턴한다면,</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">output 생성시 템플릿 인자로 리턴타입을 지정해야만한다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">예제에서는 연산자가 리턴값을 가지고 있지 않기 때문에 템플릿 인자가 요구 되지 않는다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">두번째 인자로는 boost::variant 타입 변수가 필요하다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">boost::apply_visitor() 는 첫번째 인자로 전달된 객체의 오더로드된 operator()()</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">연산자중에서 두번째 인자의 데이터형에 일치하는것을 자동으로 호출한다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">위 예제에서 boost::apply_visitor() 가 호출될때마다 서로 다른 오버로드된</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">연산자가 호출된다(즉, double,char, std::string 순서로).</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">그렇다면 이 함수를 사용하는 잇점은 무엇인가?</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">자동적으로 적절한 오버로드 연산자를 호출해주는 것 말고도,boost::apply_visitor()는</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">boost::variant 타입의 변수가 지원하는 모든 데이터유형에 대해서 오버로드된 연산자를</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">제공해야 함을 확실하게 보장한다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">만약 예제에서 3가지 연산자 오버로딩중에서 한가지를 누락했다면,컴파일이 되지 않을 것이다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">만약 오버로드 연산자가 모두 동일한 작업을 하는경우라면(즉, 위 예제처럼)</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">템플릿을 이용해서 코드를 간단하게 할수 있다.</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;boost/variant.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;boost/any.hpp&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;vector&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;string&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">#include &lt;iostream&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">std::vector&lt;boost::any&gt; vector;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">struct output : public boost::static_visitor&lt;&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; template &lt;typename T&gt;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; void operator()(T &amp;t) const</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; {</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; vector.push_back(t);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; }</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">};</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">int main()</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">{</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::variant&lt;double, char, std::string&gt; v;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 3.14;</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::apply_visitor(output(), v);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = 'A';</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::apply_visitor(output(), v);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; v = "Hello, world!";</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">&nbsp; &nbsp; boost::apply_visitor(output(), v);</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">}</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">boost::apply_visitor() 는 코드의 정확함이 컴파일타임에 보장되므로,</span></div><div style="background-color: white; color: #555555; font-family: Arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: arial, helvetica, sans-serif;">boost::get() 를 사용하는것이 바람직하다.</span></div>