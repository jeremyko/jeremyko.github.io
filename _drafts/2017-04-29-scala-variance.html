---
layout: post
title: 'scala variance '
date: '2017-04-29T19:29:00.002+09:00'
author: jeremyko
tags:
- scala
modified_time: '2017-04-29T19:29:32.790+09:00'
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-9130345832966382695
blogger_orig_url: https://jeremyko.blogspot.com/2017/04/scala-variance.html
---

이 개념이 어렵네.....<br /><br />http://stackoverflow.com/questions/4531455/whats-the-difference-between-ab-and-b-in-scala/4531696#4531696<br /><br />http://codedefinition.com/scala-type-covariance-and-contravariance.html<br /><br />http://docs.scala-lang.org/tutorials/tour/variances.html<br /><br />c++에서 부모 클래스 포인터는  자식 클래스를 가르킬수 있다 이것을 구현하는 방법임..<br /><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//--------------------------------------------------------</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//variant covariance</span><span style="color: grey;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//http://codedefinition.com/scala-type-covariance-and-contravariance.html</span><span style="color: #cc7832; font-weight: bold;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: #cc7832; font-weight: bold;">class </span>Person(<span style="color: #cc7832; font-weight: bold;">val </span>name: <span style="color: #4e807d;">String</span>) {<br />  <span style="color: #cc7832; font-weight: bold;">override def </span><span style="color: #ffc66d;">toString </span>= name<br />}<br /><br /><span style="color: #cc7832; font-weight: bold;">class </span>Employee(<span style="color: #cc7832; font-weight: bold;">override val </span>name: <span style="color: #4e807d;">String</span>) <span style="color: #cc7832; font-weight: bold;">extends </span>Person(name)<br /><br /><span style="color: #cc7832; font-weight: bold;">val </span><span style="color: #9876aa; font-style: italic;">empList </span>= <span style="color: #9876aa; font-style: italic;">List</span>(<span style="color: #cc7832; font-weight: bold;">new </span>Employee(<span style="color: #6a8759;">"Joao"</span>)<span style="color: #cc7832;">, </span><span style="color: #cc7832; font-weight: bold;">new </span>Employee(<span style="color: #6a8759;">"Andre"</span>))<br /><span style="color: #cc7832; font-weight: bold;">val </span><span style="color: #9876aa; font-style: italic;">peopleList </span>= <span style="color: #9876aa; font-style: italic;">List</span>(<span style="color: #cc7832; font-weight: bold;">new </span>Person(<span style="color: #6a8759;">"Martin"</span>)<span style="color: #cc7832;">, </span><span style="color: #cc7832; font-weight: bold;">new </span>Person(<span style="color: #6a8759;">"Jonas"</span>))<br /><br /><span style="color: grey;">//def sayHi(people:List[Employee]) = people.map { println _ } --&gt; error</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: #cc7832; font-weight: bold;">def </span><span style="color: #ffc66d;">sayHi</span>[<span style="color: #4e807d;">T </span>&lt;: Person](people:<span style="color: #4e807d;">List</span>[<span style="color: #4e807d;">T</span>]) = people.map { <span style="font-style: italic;">println </span>_ }<br /><span style="color: grey;">//T sould be of Type Person or any class that derives from Person</span><span style="color: grey;"><br /></span><span style="font-style: italic;">sayHi</span>(<span style="color: #9876aa; font-style: italic;">empList</span>)<br /><span style="font-style: italic;">sayHi</span>(<span style="color: #9876aa; font-style: italic;">peopleList</span>) <span style="color: grey;">// compilation ERROR</span><span style="color: grey;"><br /></span><span style="color: grey;">//You can also indicate covariance at the class level</span><span style="color: grey;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//by making the parameterized type+T instead off T.</span><span style="color: #cc7832; font-weight: bold;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: #cc7832; font-weight: bold;">class </span>SomeCollection[<span style="color: #4e807d;">+T</span>]<br /><br /><span style="color: #cc7832; font-weight: bold;">var </span><span style="color: #9876aa; font-style: italic;">lst1 </span>= <span style="color: #cc7832; font-weight: bold;">new </span>SomeCollection[Employee]<br /><span style="color: #cc7832; font-weight: bold;">var </span><span style="color: #9876aa; font-style: italic;">lst2</span>: SomeCollection[Person] = <span style="color: #9876aa; font-style: italic;">lst1</span><span style="color: #9876aa; font-style: italic;"><br /></span><span style="color: grey;">//Contravariance</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//With the syntax [T, D &lt;: T], we have constrained the</span><span style="color: grey;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//parameterized type D to be of the type T or a super type of T,</span><span style="color: grey;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//so basically T sets the lower level in the Type hierarchy for type D.</span><span style="color: grey;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//In our example the type D (Person) can be of type T (Employee) or its superclass.</span><span style="color: #cc7832; font-weight: bold;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: #cc7832; font-weight: bold;">def </span><span style="color: #ffc66d;">appendToPerson</span>[<span style="color: #4e807d;">T</span><span style="color: #cc7832;">, </span><span style="color: #4e807d;">D </span>&lt;: <span style="color: #4e807d;">T</span>](employees: <span style="color: #4e807d;">List</span>[<span style="color: #4e807d;">T</span>]<span style="color: #cc7832;">, </span>people: <span style="color: #4e807d;">List</span>[<span style="color: #4e807d;">D</span>]) =<br />  people ++ employees<br /><br /><span style="color: grey;">//A class C[T], when a method accepts only C[T] is invariant</span><span style="color: grey;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//A class C[+T], when a method accepts C[T] i can also get any of it’s dervatives</span><span style="color: grey;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//A class C[+-T], when a method accepts C[T] i can also get any of it’s super classes</span><span style="color: grey;"><br /></span><span style="color: grey;">//def fun[T &lt;: A](arg:T) // covariant, arg must be of type T or any of it's subclasses</span><span style="color: grey;">&nbsp;</span></pre><pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: 'Hack'; font-size: 9.0pt;"><span style="color: grey;">//def fun[T &gt;: A](arg:T) // Contravariant, arg must be of type T or any of it's super class</span></pre><br /><br />Abstract Types : 이것도 어렵다.... --;;<br /><br />