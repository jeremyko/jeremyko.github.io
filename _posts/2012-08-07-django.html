---
layout: post
title: Django 게시판 만들기 3 - 글 조회 및 수정, 삭제 기능 구현
date: '2012-08-07T18:13:00.003+09:00'
author: jeremyko
tags:
- python
- 게시판
- Django
modified_time: '2014-01-07T13:15:15.872+09:00'
thumbnail: http://3.bp.blogspot.com/-PJ9uN2jyyUs/UCDcMwxUl6I/AAAAAAAAA3Q/W3Z8EcxYlY0/s72-c/view.jpg
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-7738136697223953258
blogger_orig_url: https://jeremyko.blogspot.com/2012/08/django.html
---

<br />목록에서 글 보기를 위한 url은 /viewWork 로 설정했고, GET방식으로 글 조회를 위한 정보를 전달하게 되어 있었다.&nbsp;그럼 할일은 앞서와 마찬가지로 url 과 컨트롤러 맵핑이 되겠다. 먼저 컨트롤러 추가.<br /><br /><span style="color: #45818e;">def viewWork(request):</span><br /><span style="color: #45818e;">&nbsp; &nbsp; pk= request.GET['memo_id']</span><br /><span style="color: #45818e;">&nbsp; &nbsp; boardData = DjangoBoard.objects.get(id=pk)</span><br /><span style="color: #45818e;"></span><br /><span style="color: #45818e;">&nbsp; &nbsp;&nbsp;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; <span style="background-color: #fff2cc;"># 조회수를 늘린다.&nbsp;</span> &nbsp;&nbsp;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; DjangoBoard.objects.filter(id=pk).update(hits = boardData.hits + 1)</span><br /><br /><span style="color: #45818e;">&nbsp; &nbsp;&nbsp;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; return render_to_response('viewMemo.html', {'memo_id': request.GET['memo_id'],</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'current_page':request.GET['current_page'],</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'searchStr': request.GET['searchStr'],</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'boardData': boardData } )</span><br /><br />여기서는 테이블의 PK값인 id를 알고 있으므로, model의 DjangoBoard.objects.get(id=pk) 츨 호출해서 해당 데이터를 얻을수 있다.&nbsp;그리고 구한 게시물 정보를 템플릿으로 넘겨주고 있다. url을 추가한다.<br /><br /><span style="color: #45818e;">urlpatterns = patterns('',</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^$', views.home),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^show_write_form/$', views.show_write_form),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^DoWriteBoard/$', views.DoWriteBoard),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSpecificPageWork/$', views.listSpecificPageWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; <span style="background-color: #fff2cc;">url(r'^viewWork/$', views.viewWork),</span></span><br /><span style="color: #45818e;">)</span><br /><br />그 다음은? <span style="color: #45818e;">viewMemo.html</span> 템플릿을 생성한다. 간단한 게시판이라서 그런지 정말 간단하다.^^<br />&nbsp; <span style="color: #45818e;">&lt;html&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;head&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;title&gt;글보기&lt;/title&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;/head&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &lt;script language="javascript"&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; function boardlist()</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; {</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var s = "{{ "{{" }}searchStr}}";</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(s=="None")</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location.href = '/listSpecificPageWork?current_page={{ "{{" }}current_page}}';</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location.href = '/listSearchedSpecificPageWork?pageForView={{ "{{" }}current_page}}&amp;searchStr={{ "{{" }}searchStr}}';</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; }</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; function boardmodify()</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; {</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location.href='/listSpecificPageWork_to_update?memo_id={{ "{{" }}memo_id}}&amp;current_page={{ "{{" }}current_page}}&amp;searchStr={{ "{{" }}searchStr}}';</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; }</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; function boarddelete()</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; {</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location.href='/DeleteSpecificRow?memo_id={{ "{{" }}memo_id}}&amp;current_page={{ "{{" }}current_page}}';</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; }</span><br /><span style="color: #45818e;">&nbsp; &lt;/script&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;table cellspacing = 0 cellpadding = 5 border = 1 width=500&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;&lt;b&gt;조회수&lt;/b&gt;&lt;/td&gt;&lt;td&gt; {{ "{{" }} boardData.hits }} &lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;&lt;b&gt;이름 &lt;/b&gt;&lt;/td&gt;&lt;td&gt; {{ "{{" }} boardData.name }} &lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;&lt;b&gt;이메일 &lt;/b&gt;&lt;/td&gt;&lt;td&gt; {{ "{{" }} boardData.mail }} &lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;&lt;b&gt;제목 &lt;/b&gt;&lt;/td&gt;&lt;td&gt; {{ "{{" }} boardData.subject }} &lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;&lt;b&gt;내용 &lt;/b&gt;&lt;/td&gt;&lt;td width=350&gt; {{ "{{" }} boardData.memo }} &lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;/table&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &lt;table &nbsp;cellspacing = 0 cellpadding = 0 border = 0 width=500&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=button value="수정" OnClick="javascript:boardmodify()"&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=button value="목록" OnClick="javascript:boardlist()"&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=button value="삭제" OnClick="javascript:boarddelete()"&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;/table&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;/html&gt;</span><br /><br />여기까지 작업한 결과, 글 목록에서 해당 게시물을 클릭하면 다음처럼 내용이 조회된다.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-PJ9uN2jyyUs/UCDcMwxUl6I/AAAAAAAAA3Q/W3Z8EcxYlY0/s1600/view.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-PJ9uN2jyyUs/UCDcMwxUl6I/AAAAAAAAA3Q/W3Z8EcxYlY0/s320/view.jpg" height="127" width="320" /></a></div><br /><a name='more'></a><br /><br />이제 이 화면에서의 처리를 작업해야 한다. 처리 해야할 기능은 버튼 3가지, 즉, 목록, 수정, 삭제가 되겠다.<br /><br /><span style="background-color: #fff2cc;">목록 기능 구현 </span><br />먼저 목록을 누른 경우를 생각해보자. javascript 로 처리한 부분을 보면 검색 문자열이 있는 경우와 없는 경우를 구분해서 다른 url을 호출하고 있다.&nbsp;이는 검색된 상태에서 글을 보고 목록으로 돌아가는 경우(<span style="color: #073763;"> /listSearchedSpecificPageWork</span> )와 그렇지 않은 경우를 처리하기 위함이다. 목록 처리를 위해서&nbsp;/listSpecificPageWork 는 이미 구현해 놓았으므로 처리할게 없고, /listSearchedSpecificPageWork, 이것에 대한 url과 그 컨트롤러를 추가해줘야 겠다.<br /><br />컨트롤러에 추가후 url 맵핑을 해준다.<br /><br /><span style="color: #45818e;">def listSearchedSpecificPageWork(request):</span><br /><span style="color: #45818e;">&nbsp; &nbsp; searchStr = request.GET['searchStr']</span><br /><span style="color: #45818e;">&nbsp; &nbsp; pageForView = request.GET['pageForView']</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; <span style="color: #073763;"># 다음은 테이블에서 subject 항목에 대해 LIKE SQL을 수행한다.</span></span><br /><span style="color: #45818e;">&nbsp; &nbsp; totalCnt = DjangoBoard.objects.filter(subject__contains=searchStr).count()</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; pagingHelperIns = pagingHelper();</span><br /><span style="color: #45818e;">&nbsp; &nbsp; totalPageList = pagingHelperIns.getTotalPageList( totalCnt, rowsPerPage)</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; <span style="color: #073763;"># Raw SQL에 like 구문 적용방법.. 이 방법 찾다가 삽질 좀 했다.</span></span><br /><span style="color: #45818e;">&nbsp; &nbsp; boardList = DjangoBoard.objects.raw("""SELECT Z.* FROM ( SELECT X.*, ceil(rownum / %s) as page \</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; FROM ( SELECT ID,SUBJECT,NAME, CREATED_DATE, MAIL,MEMO,HITS FROM SAMPLE_BOARD_DJANGOBOARD \</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; WHERE SUBJECT LIKE '%%'||%s||'%%' ORDER BY ID DESC) X ) Z WHERE page = %s""", [rowsPerPage, searchStr, pageForView])</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; return render_to_response('listSearchedSpecificPage.html', {'boardList': boardList, 'totalCnt': totalCnt,</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'pageForView':int(pageForView) ,'searchStr':searchStr, 'totalPageList':totalPageList} )</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;"><span style="color: #073763;">- url 맵핑</span></span><span style="color: #45818e;">urlpatterns = patterns('',</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^$', views.home),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^show_write_form/$', views.show_write_form),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^DoWriteBoard/$', views.DoWriteBoard),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSpecificPageWork/$', views.listSpecificPageWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^viewWork/$', views.viewWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSearchedSpecificPageWork/$', views.listSearchedSpecificPageWork),</span><br /><span style="color: #45818e;">)</span><br /><br />listSearchedSpecificPage.html 템플릿을 추가한다. 원래 검색기능은 처음 게시물 목록 보기 화면 listSpecificPage.html 에 있으므로 <br />먼저 이 기능 구현을 해야 했어야 하는데, 글 조회 화면의 기능을 구현하면서 이 템플릿을 작성하고 있는 것이니 착오없기 바란다.<br /><br /><span style="color: #45818e;">&nbsp; listSearchedSpecificPage.html</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &lt;table cellspacing=1 width=700 border=0&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td&gt;총 게시물수: {{ "{{" }} totalCnt }}&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td&gt;&lt;p align=right&gt; 페이지:{{ "{{" }} pageForView }}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;/table&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &lt;table cellspacing=1 width=700 border=1&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=50&gt;&lt;p align=center&gt;번호&lt;/p&gt;&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=100&gt;&lt;p align=center&gt;이름&lt;/p&gt;&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=320&gt;&lt;p align=center&gt;제목&lt;/p&gt;&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=100&gt;&lt;p align=center&gt;등록일&lt;/p&gt;&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=100&gt;&lt;p align=center&gt;조회수&lt;/p&gt;&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;/tr&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; {{ "{%" }} if boardList %}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ "{%" }} for boardRow in boardList %}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=50&gt;&lt;p align=center&gt;{{ "{{" }} boardRow.id }}&lt;/p&gt;&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=100&gt;&lt;p align=center&gt;{{ "{{" }} boardRow.name }}&lt;/p&gt;&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=320&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p align=center&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href="/viewWork?memo_id={{ "{{" }} boardRow.id }}&amp;current_page={{ "{{" }} pageForView }}&amp;searchStr={{ "{{" }}searchStr}}" title="{{ "{{" }} boardRow.memo}}"&gt;{{ "{{" }} boardRow.subject }}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/p&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=100&gt;&lt;p align=center&gt;{{ "{{" }} boardRow.created_date }}&lt;/p&gt;&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=100&gt;&lt;p align=center&gt;{{ "{{" }} boardRow.hits }}&lt;/p&gt;&lt;/td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ "{%" }} endfor %}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; {{ "{%" }} else %}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p&gt;No Data.&lt;/p&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; {{ "{%" }} endif %}</span><br /><span style="color: #45818e;">&nbsp; &lt;/table&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &lt;table cellspacing=1 width=700 border=1 &gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt; &lt;td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ "{%" }} for page in totalPageList %}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href="/listSearchedSpecificPageWork?searchStr={{ "{{" }}searchStr}}&amp;pageForView={{ "{{" }}page}}" &gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ "{%" }} ifequal page pageForView %}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;b&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ "{%" }} endifequal %}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ "{{" }}page}}</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ "{%" }} ifequal page pageForView &nbsp;%}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/b&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ "{%" }} endifequal %}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ "{%" }} endfor %}</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/td&gt; &lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;/table&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &lt;table width=700&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td&gt;&lt;input type=button value="전체 목록으로 돌아가기" &nbsp;OnClick="window.location='/'"&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &lt;/table&gt;</span><br /><br />먼저 보았던 listSpecificPage.html 과 searchStr 처리부분만 틀리고 거의 동일하다는것을 참고하기 바란다.&nbsp;지금까지 목록 버튼 처리를 구현했다.<br /><br /><span style="background-color: #fff2cc;">수정 버튼 구현 </span><br />이제 수정 버튼을 구현할 차례이다.&nbsp;수정 기능은 먼저 해당 게시물 데이터를 조회해서 폼에 채워주고 재작성시의 처리 url과 컨트롤러를 맵핑 해주면 된다.&nbsp;우리는 수정을 위한 url을 /listSpecificPageWork_to_update 로 설정 했으므로, 컨트롤러 작성 및 url 맵핑을 절차대로 수행한다.<br /><br />- 컨트롤러 작성<br /><span style="color: #45818e;">def listSpecificPageWork_to_update(request):</span><br /><span style="color: #45818e;">&nbsp; &nbsp; memo_id = request.GET['memo_id']</span><br /><span style="color: #45818e;">&nbsp; &nbsp; current_page = request.GET['current_page']</span><br /><span style="color: #45818e;">&nbsp; &nbsp; searchStr = request.GET['searchStr']</span><br /><span style="color: #45818e;">&nbsp; &nbsp; boardData = DjangoBoard.objects.get(id=memo_id)</span><br /><span style="color: #45818e;">&nbsp; &nbsp; return render_to_response('viewForUpdate.html', {'memo_id': request.GET['memo_id'],</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'current_page':request.GET['current_page'],</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'searchStr': request.GET['searchStr'],</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'boardData': boardData } )</span><br /><br />- url 맵핑<br /><span style="color: #45818e;">urlpatterns = patterns('',</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^$', views.home),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^show_write_form/$', views.show_write_form),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^DoWriteBoard/$', views.DoWriteBoard),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSpecificPageWork/$', views.listSpecificPageWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^viewWork/$', views.viewWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSearchedSpecificPageWork/$', views.listSearchedSpecificPageWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; </span><span style="background-color: #fff2cc; color: #134f5c;">url(r'^listSpecificPageWork_to_update/$', views.listSpecificPageWork_to_update),</span><br /><span style="color: #45818e;">)</span><br /><br />- 템플릿 작성 : viewForUpdate.html<br /><br /><span style="color: #45818e;">&lt;html&gt;</span><br /><span style="color: #45818e;">&lt;head&gt;</span><br /><span style="color: #45818e;">&lt;title&gt;글보기&lt;/title&gt;</span><br /><span style="color: #45818e;">&lt;/head&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&lt;script language="javascript"&gt;</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span>function writeCheck()</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span>{</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp;var form = document.modifyform;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp;if( !form.subject.value )</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp;{</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp; &nbsp; &nbsp;alert( "제목을 적어주세요" );</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp; &nbsp; &nbsp;form.subject.focus();</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp; &nbsp; &nbsp;return;</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp;}</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp;if( !form.memo.value )</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp;{</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp; &nbsp; &nbsp;alert( "내용을 적어주세요" );</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp; &nbsp; &nbsp;form.memo.focus();</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp; &nbsp; &nbsp;return;</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp;}</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp;form.submit();</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span>}</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span>function boardlist()</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span>{</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; &nbsp;var s = "{{ "{{" }}searchStr}}";</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; if(s=="None")</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location.href = '/listSpecificPageWork?current_page={{ "{{" }}current_page}}';</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; else</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location.href = '/listSearchedSpecificPageWork?pageForView={{ "{{" }}current_page}}&amp;searchStr={{ "{{" }}searchStr}}';</span><br /><span style="color: #45818e;"><span class="Apple-tab-span" style="white-space: pre;"> </span>}</span><br /><span style="color: #45818e;">&lt;/script&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&lt;table cellspacing = 0 cellpadding = 5 border = 1 width=500&gt;</span><br /><span style="color: #45818e;">&lt;form name=modifyform method=post action="/updateBoard/"&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &lt;input type=hidden name=memo_id &nbsp;value="{{ "{{" }}memo_id}}"&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &lt;input type=hidden name=current_page &nbsp;value="{{ "{{" }}current_page}} "&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &lt;input type=hidden name=searchStr &nbsp;value="{{ "{{" }}searchStr}} "&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;&lt;b&gt;이름&lt;/b&gt;&lt;/td&gt;&lt;td&gt;{{ "{{" }} boardData.name }}&lt;input type=hidden name=name size=50 &nbsp;maxlength=30 value="{{ "{{" }} boardData.name }}"&gt;&lt;/td&gt;&lt;tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;&lt;b&gt;이메일&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=text name=mail size=50 &nbsp;maxlength=50 value="{{ "{{" }} boardData.mail }}"&gt;&lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;&lt;b&gt;제목&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=text name=subject size=50 &nbsp;maxlength=50 value="{{ "{{" }} boardData.subject }}"&gt;&lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;&lt;b&gt;내용&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;textarea name=memo cols=50 rows=10&gt;{{ "{{" }} boardData.memo }}&lt;/textarea&gt;&lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&lt;/form&gt;</span><br /><span style="color: #45818e;">&lt;/table&gt;</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&lt;table &nbsp;cellspacing = 0 cellpadding = 0 border = 0 width=500&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=button value="재등록" OnClick="javascript:writeCheck();"&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=button value="목록" OnClick="javascript:boardlist()"&gt;</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &lt;/td&gt;&lt;/tr&gt;</span><br /><span style="color: #45818e;">&lt;/table&gt;</span><br /><span style="color: #45818e;">&lt;/html&gt;</span><br /><br />템플릿 파일에서 재등록시 수행되는 url 을 /updateBoard/ 로 설정 했으므로, 컨트롤러 추가및 url 맵핑을 실시한다.<br /><br />- 컨트롤러 작성<br /><span style="color: #45818e;">@csrf_exempt</span><br /><span style="color: #45818e;">def updateBoard(request):</span><br /><span style="color: #45818e;">&nbsp; &nbsp; memo_id = request.POST['memo_id']</span><br /><span style="color: #45818e;">&nbsp; &nbsp; current_page = request.POST['current_page']</span><br /><span style="color: #45818e;">&nbsp; &nbsp; searchStr = request.POST['searchStr']</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; # Update DataBase</span><br /><span style="color: #45818e;">&nbsp; &nbsp; DjangoBoard.objects.filter(id=memo_id).update(</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mail= request.POST['mail'],</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; subject= request.POST['subject'],</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; memo= request.POST['memo']</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; # Display Page =&gt; POST 요청은 redirection으로 처리하자</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url = '/listSpecificPageWork?current_page=' + str(current_page)</span><br /><span style="color: #45818e;">&nbsp; &nbsp; return HttpResponseRedirect(url)</span><br /><br />- url 맵핑<br /><span style="color: #45818e;">urlpatterns = patterns('',</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^$', views.home),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^show_write_form/$', views.show_write_form),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^DoWriteBoard/$', views.DoWriteBoard),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSpecificPageWork/$', views.listSpecificPageWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^viewWork/$', views.viewWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSearchedSpecificPageWork/$', views.listSearchedSpecificPageWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSpecificPageWork_to_update/$', views.listSpecificPageWork_to_update),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; <span style="background-color: #fff2cc;">url(r'^updateBoard/$', views.updateBoard),</span></span><br /><span style="color: #45818e;">)</span><br /><br />모델을 이용해서 update를 수행했다.<br /><br /><span style="background-color: #fff2cc;">삭제 기능 구현 </span><br />자..지금까지 목록, 수정 가능을 구현했고 이제 삭제 기능을 구현할 차례이다.&nbsp;컨트롤러와 url 맵핑을 수행한다. model을 이용해서 delete를 수행한다.<br /><br />- 컨트롤러 작성<br /><span style="color: #45818e;">def DeleteSpecificRow(request):</span><br /><span style="color: #45818e;">&nbsp; &nbsp; memo_id = request.GET['memo_id']</span><br /><span style="color: #45818e;">&nbsp; &nbsp; current_page = request.GET['current_page']</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; p = DjangoBoard.objects.get(id=memo_id)</span><br /><span style="color: #45818e;">&nbsp; &nbsp; p.delete()</span><br /><span style="color: #45818e;"></span><span style="color: #45818e;">&nbsp; &nbsp; </span><br /><span style="color: #45818e;">&nbsp; &nbsp; <span style="color: #073763;"># 마지막 메모를 삭제하는 경우, 페이지를 하나 줄임.</span></span><br /><span style="color: #45818e;">&nbsp; &nbsp; totalCnt = DjangoBoard.objects.all().count()</span><br /><span style="color: #45818e;">&nbsp; &nbsp; pagingHelperIns = pagingHelper();</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; totalPageList = pagingHelperIns.getTotalPageList( totalCnt, rowsPerPage)</span><br /><span style="color: #45818e;">&nbsp; &nbsp; print 'totalPages', totalPageList</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; if( int(current_page) in totalPageList):</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; print 'current_page No Change'</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; current_page=current_page</span><br /><span style="color: #45818e;">&nbsp; &nbsp; else:</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; current_page= int(current_page)-1</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; &nbsp; print 'current_page--'</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; &nbsp; url = '/listSpecificPageWork?current_page=' + str(current_page)</span><br /><span style="color: #45818e;">&nbsp; &nbsp; return HttpResponseRedirect(url)</span><br /><br />- url 맵핑<br /><span style="color: #45818e;">urlpatterns = patterns('',</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^$', views.home),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^show_write_form/$', views.show_write_form),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^DoWriteBoard/$', views.DoWriteBoard),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSpecificPageWork/$', views.listSpecificPageWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^viewWork/$', views.viewWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSearchedSpecificPageWork/$', views.listSearchedSpecificPageWork),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^listSpecificPageWork_to_update/$', views.listSpecificPageWork_to_update),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; url(r'^updateBoard/$', views.updateBoard),</span><br /><span style="color: #45818e;">&nbsp; &nbsp; <span style="background-color: #fff2cc;">url(r'^DeleteSpecificRow/$', views.DeleteSpecificRow),</span></span><br /><span style="color: #45818e;">)</span><br /><br />글 조회 화면에서 목록보기, 수정, 삭제의 기능을 모두 구현하였다. 다음은 전체 목록 화면에서 검색 기능 구현이다.<br /><br /><br />이 예제의 전체 소스는 아래에서 받을 수 있다.<br /><b><a href="https://github.com/jeremyko/dj_board">https://github.com/jeremyko/dj_board</a></b><br /><br />이어지는 글:<br /><h3 class="post-title entry-title" itemprop="name" style="background-color: #fefdfa; color: #d52a33; font-family: Georgia, Utopia, 'Palatino Linotype', Palatino, serif; font-size: 22px; font-weight: normal; margin: 0px; position: relative;"><a href="http://jeremyko.blogspot.kr/2012/08/django-4.html" target="_blank">Django 게시판 만들기 4 - 검색 기능 구현</a></h3>