---
layout: post
title: 'golang : interface 로 전달받은 pointer 가 가르키는 type 을 찾기'
date: '2021-08-06T22:59:00.004+09:00'
author: jeremyko
tags:
- golang
modified_time: '2021-08-07T11:19:41.153+09:00'
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-5460075570817372066
blogger_orig_url: https://jeremyko.blogspot.com/2021/08/golang-interface-pointer-type.html
---

reflect.Indirect 를 활용하면, interface 로 전달된 인자가 pointer인 경우, 그 pointer가 가르키는 실제 type 에 대한 정보를 알수 있다. 여러 type을 전달받는 공통 함수 등을 작성할때 유용한 tip <br /><br /> <!--HTML generated using hilite.me--><div style="background: rgb(238, 238, 221) none repeat scroll 0% 0%; border-color: gray; border-image: none 100% / 1 / 0 stretch; border-style: solid; border-width: 0.1em 0.1em 0.1em 0.2em; border: medium solid gray; overflow: auto; padding: 0.2em 0.1em; width: auto;"><pre style="line-height: 125%; margin: 0px;"><span style="color: darkmagenta; font-weight: bold;">package</span> main<br /><br /><span style="color: darkmagenta; font-weight: bold;">import</span> (<br /><span style="color: #cd5555;">    </span><span style="color: #cd5555;">"fmt"</span><br />    <span style="color: #cd5555;">"reflect"</span><br />)<br /><br /><span style="color: darkmagenta; font-weight: bold;">func</span> testFunc(value <span style="color: darkmagenta; font-weight: bold;">interface</span>{}) {<br />    fmt.Println(<span style="color: #cd5555;">"---------------------"</span>)<br />    fmt.Println(<span style="color: #cd5555;">"type = "</span> + reflect.ValueOf(value).Type().String())<br />    fmt.Println(<span style="color: #cd5555;">"kind = "</span> + reflect.ValueOf(value).Kind().String())<br />    <span style="color: darkmagenta; font-weight: bold;">if</span> reflect.ValueOf(value).Kind()==reflect.Ptr {<br />	fmt.Println(<span style="color: #cd5555;">"--&gt; pointer "</span> )<br />	pointsToValue := reflect.Indirect( reflect.ValueOf(value))<br />	fmt.Println(<span style="color: #cd5555;">"--&gt;"</span>,pointsToValue.Kind(), <br />	<span style="color: #cd5555;">    " - "</span>,pointsToValue.Type(), <span style="color: #cd5555;">" - "</span>, pointsToValue)<br />	<span style="color: darkmagenta; font-weight: bold;">if</span> pointsToValue.Kind()==reflect.Slice {<br />	    fmt.Println(<span style="color: #cd5555;">"--&gt; slice !! "</span> )<br />        }<br />    }<br />}<br /><br /><span style="color: darkmagenta; font-weight: bold;">func</span> main() {<br />    <span style="color: darkmagenta; font-weight: bold;">var</span> testVar1 <span style="color: #a7a7a7; font-weight: bold;">string</span><br />    <span style="color: darkmagenta; font-weight: bold;">var</span> testVar2 []<span style="color: #a7a7a7; font-weight: bold;">string</span><br />    <span style="color: darkmagenta; font-weight: bold;">var</span> testVar3 []*<span style="color: #a7a7a7; font-weight: bold;">string</span>&nbsp;</pre><pre style="line-height: 125%; margin: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</pre><pre style="line-height: 125%; margin: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;testVar2 = <span style="color: #658b00;">append</span>(testVar2,<span style="color: #cd5555;">"A"</span>)<br />    testVar2 = <span style="color: #658b00;">append</span>(testVar2,<span style="color: #cd5555;">"B"</span>)&nbsp;</pre><pre style="line-height: 125%; margin: 0px;">&nbsp;</pre><pre style="line-height: 125%; margin: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;testFunc(testVar1)<br />    testFunc(&amp;testVar1)</pre><pre style="line-height: 125%; margin: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;testFunc(testVar2)<br />    testFunc(&amp;testVar2)</pre><pre style="line-height: 125%; margin: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;testFunc(testVar3)<br />    testFunc(&amp;testVar3)<br />}<br /></pre></div>  <p>&nbsp;</p><p><a href="https://play.golang.org/p/1PEOYIPdyFb" target="_blank">https://play.golang.org/p/1PEOYIPdyFb</a><br /></p><p><br /></p>