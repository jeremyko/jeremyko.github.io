---
layout: post
title: 'protothread : Duff''s device'
date: '2011-09-20T17:50:00.000+09:00'
author: jeremyko
tags:
- cpp
- protothread
- c
- Duff's device
modified_time: '2022-03-26T21:04:01.227+09:00'
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-1189253559528628555
blogger_orig_url: https://jeremyko.blogspot.com/2012/04/protothread-duffs-device.html
---

<span style="background-color: white; color: #555555; font-family: Verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><a href="http://www.sics.se/~adam/pt/" style="color: #909090; text-decoration: none;" target="_blank">protothread</a>&nbsp;란 것을 보던중에 아래와 같은 소스를 발견.</span><br /><div style="background-color: white; color: #555555; font-size: 12px; line-height: 18px; text-align: left;"><div style="font-family: arial, helvetica, sans-serif;"><span style="font-family: Verdana, arial, helvetica, sans-serif;">그동안 몰랐던 이상야릇한 C언어 switch 구문형태이다~</span></div><div style="font-family: arial, helvetica, sans-serif;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"><br /></span></div><div class="pastie" style="font-family: arial, helvetica, sans-serif;"><div class="allcode" style="border-bottom-color: rgb(221, 221, 221); border-bottom-style: solid; border-bottom-width: 1px; border-image: initial; border-left-color: rgb(221, 221, 221); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(221, 221, 221); border-right-style: solid; border-right-width: 1px; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-top-width: 1px; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace; padding-bottom: 5px; padding-left: 10px; padding-right: 10px; padding-top: 5px;"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="color: #555555; font-family: 돋움, Dotum; font-size: 12px; line-height: 18px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;"><pre class="textmate-source-numbers" style="background-attachment: initial; background-clip: initial; background-color: transparent; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; color: #999999; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace; padding-right: 12px;">1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br /></pre></td><td style="color: #555555; font-family: 돋움, Dotum; font-size: 12px; line-height: 18px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;"><pre class="textmate-source" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace;"><pre class="sunburst" style="background-attachment: initial; background-clip: initial; background-color: transparent; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace;"><span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span> counter = <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>;<br /><span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span> n = <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>;<br /><br /><span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span> somefun()<br />{<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">switch</span>(n){<br />        <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>: <br />   <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">while</span>(<span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">1</span>){<br />     n = <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">12</span>; <br />     <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">12</span>:<br />     <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">if</span>(!(counter == <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">1000</span>))<br />         <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">return</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>;       <br />     <span class="support support_function support_function_C99 support_function_C99_c" style="color: #cc0000; font-weight: bold;">printf</span>(<span class="string string_quoted string_quoted_double string_quoted_double_c" style="background-color: #fff0f0; color: #dd2200;">"Threshold reached<span class="constant constant_character constant_character_escape constant_character_escape_c" style="color: #003388; font-weight: bold;">\n</span>"</span>);<br />     counter = <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>;<br /> }<br />    }<br />    n = <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>;  <br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">return</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">2</span>;<br />}<br /><br /><span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span><span class="meta meta_function meta_function_c"> <span class="entity entity_name entity_name_function entity_name_function_c">_tmain</span>(<span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span> argc, _TCHAR* argv[])</span><br />{<br /> somefun(); <span class="comment comment_line comment_line_double-slash comment_line_double-slash_c++" style="color: #888888;">// case 0</span><br /> somefun(); <span class="comment comment_line comment_line_double-slash comment_line_double-slash_c++" style="color: #888888;">// case 12</span><br /> <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">return</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>;<br />}<br /></pre></pre></td></tr></tbody></table></div><div class="credit" style="background-attachment: initial; background-clip: initial; background-color: #eeeeee; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; border-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; border-bottom-width: 1px; border-image: initial; border-left-color: rgb(204, 204, 204); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(204, 204, 204); border-right-style: solid; border-right-width: 1px; border-top-color: initial; border-top-style: initial; border-top-width: 0px; color: #666666; font-family: 'Lucida Grande', Arial, Helvetica, sans-serif; font-size: 0.7em; padding-bottom: 7px; padding-left: 15px; padding-right: 15px; padding-top: 7px;"><div class="buttons" style="float: right; margin-top: -3px;"><a href="http://pastie.org/pastes/2495563.txt" style="color: #336699; text-decoration: none;"><img src="http://pastie.org/images/view.png" height="20" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px;" width="67" /></a></div><a href="http://pastie.org/2495563" style="color: #336699; text-decoration: none;">Pastie #2495563</a>&nbsp;linked directly from&nbsp;<a href="http://pastie.org/" style="color: #336699; text-decoration: none;">Pastie</a>.</div></div><div><div style="background-color: #e4e4e4; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; padding-top: 10px;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"><br /></span></div></div></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"></span><br /><a name='more'></a><span style="font-family: Verdana, arial, helvetica, sans-serif;">&nbsp;</span><br /><span style="font-family: Verdana, arial, helvetica, sans-serif;">찾은 정보들을 정리하면 다음과 같다. 이 마법같은 코드는 1983년도에 루카스 필름에 근무하던 프로그래머&nbsp;</span><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><a href="http://en.wikipedia.org/wiki/Tom_Duff" style="background-attachment: initial; background-clip: initial; background-color: initial; background-image: none; background-origin: initial; color: #0645ad; text-decoration: none;" title="Tom Duff">Tom Duff</a>&nbsp;</span><span style="font-family: Verdana, arial, helvetica, sans-serif;">가 만든것으로... 아니.. 일단 이런건 skip하고...&nbsp;</span><span style="font-family: Verdana, arial, helvetica, sans-serif;">loop unrolling을 하기 위한 코드를 컴팩트하게 만들기 위해 등장한 기법이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;">loop unrolling은 이미 알고 있듯이, 루프를 좀더 풀어내서 점프, 비교되는 반복 횟수를 줄여서 수행속도를 올리는 최적화 기법이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;">고전적인 예로, 문자열을 복사하는 함수이다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"></div><div class="pastie" style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><div class="allcode" style="border-bottom-color: rgb(221, 221, 221); border-bottom-style: solid; border-bottom-width: 1px; border-image: initial; border-left-color: rgb(221, 221, 221); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(221, 221, 221); border-right-style: solid; border-right-width: 1px; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-top-width: 1px; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace; padding-bottom: 5px; padding-left: 10px; padding-right: 10px; padding-top: 5px;"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="color: #555555; font-family: 돋움, Dotum; font-size: 12px; line-height: 18px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;"><pre class="textmate-source-numbers" style="background-attachment: initial; background-clip: initial; background-color: transparent; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; color: #999999; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace; padding-right: 12px;">1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br /></pre></td><td style="color: #555555; font-family: 돋움, Dotum; font-size: 12px; line-height: 18px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;"><pre class="textmate-source" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace;"><pre class="sunburst" style="background-attachment: initial; background-clip: initial; background-color: transparent; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace;"><span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">void</span> CopyArray(<span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">char</span>* szArrSrc, <span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">char</span>* szArrDest, <span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span> nCount)<br />{<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">do</span>                                                    <br />    {                                                      <br />        *szArrDest++ = *szArrSrc++;                        <br />    } <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">while</span>( --nCount &gt; <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span> );                              <br />}<br /><br />이것을 loop unrolling을 하게되면<br /><br /><span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span> n = nCount / <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">8</span>;                                    <br /><span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">for</span><span class="meta meta_function meta_function_c"> (<span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span> i = <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>; i &lt; n; ++i)</span>                            <br />{                                                      <br /> *szArrDest++ = *szArrSrc++;                        <br /> *szArrDest++ = *szArrSrc++;                        <br /> *szArrDest++ = *szArrSrc++;                        <br /> *szArrDest++ = *szArrSrc++;                        <br /> *szArrDest++ = *szArrSrc++;                        <br /> *szArrDest++ = *szArrSrc++;                        <br /> *szArrDest++ = *szArrSrc++;                        <br /> *szArrDest++ = *szArrSrc++;                        <br />}                                                      <br />                                                           <br /><span class="comment comment_line comment_line_double-slash comment_line_double-slash_c++" style="color: #888888;">// nCount 가 8배수 아닌경우, 남은 복사 수행</span><br />n = nCount % <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">8</span>;                                        <br /><span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">for</span><span class="meta meta_function meta_function_c"> (<span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span> i = <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>; i &lt; n; ++i)</span>                            <br />{                                                      <br /> *szArrDest++ = *szArrSrc++;                        <br />}<br /></pre></pre></td></tr></tbody></table></div><div class="credit" style="background-attachment: initial; background-clip: initial; background-color: #eeeeee; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; border-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; border-bottom-width: 1px; border-image: initial; border-left-color: rgb(204, 204, 204); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(204, 204, 204); border-right-style: solid; border-right-width: 1px; border-top-color: initial; border-top-style: initial; border-top-width: 0px; color: #666666; font-family: 'Lucida Grande', Arial, Helvetica, sans-serif; font-size: 0.7em; padding-bottom: 7px; padding-left: 15px; padding-right: 15px; padding-top: 7px;"><div class="buttons" style="float: right; margin-top: -3px;"><a href="http://pastie.org/pastes/2495575.txt" style="color: #336699; text-decoration: none;"><img src="http://pastie.org/images/view.png" height="20" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px;" width="67" /></a></div><a href="http://pastie.org/2495575" style="color: #336699; text-decoration: none;">Pastie #2495575</a>&nbsp;linked directly from&nbsp;<a href="http://pastie.org/" style="color: #336699; text-decoration: none;">Pastie</a>.</div></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"></span><br /><div><div><span style="font-family: Verdana, arial, helvetica, sans-serif;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div></div><span style="font-family: Verdana, arial, helvetica, sans-serif;"></span><br /><div><span style="font-family: Verdana, arial, helvetica, sans-serif;">이렇게 사용가능하다.</span></div><span style="font-family: Verdana, arial, helvetica, sans-serif;"></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;">이것을&nbsp;</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: normal;">Tom Duff</span><span style="font-family: Verdana, arial, helvetica, sans-serif;">&nbsp;는 두번째 루프를 없애기 위해 아래처럼 작성했다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"></span></div><div class="pastie" style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><div class="allcode" style="border-bottom-color: rgb(221, 221, 221); border-bottom-style: solid; border-bottom-width: 1px; border-image: initial; border-left-color: rgb(221, 221, 221); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(221, 221, 221); border-right-style: solid; border-right-width: 1px; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-top-width: 1px; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace; padding-bottom: 5px; padding-left: 10px; padding-right: 10px; padding-top: 5px;"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="color: #555555; font-family: 돋움, Dotum; font-size: 12px; line-height: 18px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;"><pre class="textmate-source-numbers" style="background-attachment: initial; background-clip: initial; background-color: transparent; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; color: #999999; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace; padding-right: 12px;">1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br /></pre></td><td style="color: #555555; font-family: 돋움, Dotum; font-size: 12px; line-height: 18px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;"><pre class="textmate-source" style="background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace;"><pre class="sunburst" style="background-attachment: initial; background-clip: initial; background-color: transparent; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; font-family: 'Bitstream Vera Sans Mono', Monaco, Consolas, 'Courier New', monospace;"><span class="comment comment_line comment_line_double-slash comment_line_double-slash_c++" style="color: #888888;">// Duff's device 로 이름 붙여짐.</span><br /><span class="storage storage_type storage_type_c" style="color: #008800; font-weight: bold;">int</span> mod = nCount % <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">8</span>;<br /><span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">switch</span><span class="meta meta_function meta_function_c"> (mod)</span><br />{<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>: <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">do</span> { *szArrDest++ = *szArrSrc++;<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">7</span>: *szArrDest++ = *szArrSrc++;<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">6</span>: *szArrDest++ = *szArrSrc++;<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">5</span>: *szArrDest++ = *szArrSrc++;<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">4</span>: *szArrDest++ = *szArrSrc++;<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">3</span>: *szArrDest++ = *szArrSrc++;<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">2</span>: *szArrDest++ = *szArrSrc++;<br />    <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">case</span> <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">1</span>: *szArrDest++ = *szArrSrc++;<br />    } <span class="keyword keyword_control keyword_control_c" style="color: #008800; font-weight: bold;">while</span> (--n &gt; <span class="constant constant_numeric constant_numeric_c" style="color: #0000dd; font-weight: bold;">0</span>);<br />}<br /></pre></pre></td></tr></tbody></table></div><div class="credit" style="background-attachment: initial; background-clip: initial; background-color: #eeeeee; background-image: initial; background-origin: initial; background-position: initial initial; background-repeat: initial initial; border-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; border-bottom-width: 1px; border-image: initial; border-left-color: rgb(204, 204, 204); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(204, 204, 204); border-right-style: solid; border-right-width: 1px; border-top-color: initial; border-top-style: initial; border-top-width: 0px; color: #666666; font-family: 'Lucida Grande', Arial, Helvetica, sans-serif; font-size: 0.7em; padding-bottom: 7px; padding-left: 15px; padding-right: 15px; padding-top: 7px;"><div class="buttons" style="float: right; margin-top: -3px;"><a href="http://pastie.org/pastes/2495648.txt" style="color: #336699; text-decoration: none;"><img src="http://pastie.org/images/view.png" height="20" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px;" width="67" /></a></div><a href="http://pastie.org/2495648" style="color: #336699; text-decoration: none;">Pastie #2495648</a>&nbsp;linked directly from&nbsp;<a href="http://pastie.org/" style="color: #336699; text-decoration: none;">Pastie</a>.</div></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"></span><br /><div><span style="font-family: Verdana, arial, helvetica, sans-serif;">case문장에서 } while 을 만나면, 신기하게도 흐름이 상단의 do 부분으로 이동하면서 처리가 된다.</span></div><span style="font-family: Verdana, arial, helvetica, sans-serif;"></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;">이런 기법을 이용한&nbsp;<a href="http://www.codepost.org/browse/snippets/101" style="color: #909090; text-decoration: none;" target="_blank">coroutine</a>&nbsp;도 만들어 졌다.</span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"><br /></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"><span style="color: #99cc66; font-family: Dotum, Verdana, AppleGothic, sans-serif;">Reference :&nbsp;<span style="font-family: Verdana, arial, helvetica, sans-serif;"><a href="http://goo.gl/UyxgP" style="color: #909090; text-decoration: none;" target="_blank">http://goo.gl/UyxgP</a></span></span></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;"><span style="color: #99cc66; font-family: Dotum, Verdana, AppleGothic, sans-serif;"><br /></span></span></div><div style="background-color: white; color: #555555; font-family: arial, helvetica, sans-serif; font-size: 12px; line-height: 18px; text-align: left;"><span style="font-family: Verdana, arial, helvetica, sans-serif;">그럼 다시&nbsp;<a href="http://jeremyko.blogspot.kr/2012/04/protothread.html" style="color: #909090; text-decoration: none;" target="">원래의 주제</a>로 들어가서</span></div>