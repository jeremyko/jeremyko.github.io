---
layout: post
title: Windows 에서 Ruby on Rails (RoR) 3.2.8 + Oracle XE 11g
date: '2012-08-14T12:39:00.000+09:00'
author: jeremyko
tags:
- Ruby on Rails
- Oracle XE
modified_time: '2012-12-04T20:54:49.616+09:00'
blogger_id: tag:blogger.com,1999:blog-7360229670252766698.post-2293831300062100982
blogger_orig_url: https://jeremyko.blogspot.com/2012/08/windows-ruby-on-rails-ror-oracle-xe-11g.html
---

<br /><br />RoR 은 기본적으로 Sqlite 를 Database로 제공해주고 있다. 나는 Oracle XE를 개발용으로 사용중이라서, 여기에 맞춰서 설정을 해보기로 했다. 개발 환경은 다음과 같다.<br /><br /><div style="color: #134f5c;">Ruby 1.9.3 </div><div style="color: #134f5c;">RoR&nbsp; 3.2.8</div><div style="color: #134f5c;">Oracle XE 11g</div><br /><span style="background-color: #fff2cc;"><b><span style="color: #660000;">1. RoR 설치</span></b></span><br /><br />설치 관련해서는 이미 많은 글들이 존재하므로 다시 내가 뭘 다시 써야할 내용은 없을 것 같다. 간단하게 말해보면,&nbsp;먼저 Ruby를 설치하고 (<a href="http://rubyinstaller.org/downloads/" target="_blank">http://rubyinstaller.org/downloads/</a>), 이때 Windows 에서 gem 설치를 위해서 DevKit도 같이 다운로드 해서 설치한다.&nbsp;그리고 명령 프롬프트 상에서 다음을 실행해서 RoR을 설치한다.<br />&nbsp; <span style="color: #45818e;">gem<span style="font-family: inherit;"> insta</span>ll rails</span><br /><div style="color: black;">DevKit설치는 다운받아 압축을 푼 디렉토리 내에서 다음을 수행한다.</div><div style="color: #45818e;">&nbsp; ruby dk.rb init</div><div style="color: #45818e;">&nbsp; ruby dk.rb install</div><code><span style="font-family: inherit; font-size: small;">(<a href="https://github.com/oneclick/rubyinstaller/wiki/Development-Kit" target="_blank">https://github.com/oneclick/rubyinstaller/wiki/Development-Kit</a> 을 참조)</span></code><br /><br />아니면, 간단하게 <a href="http://railsinstaller.org/" target="_blank">http://railsinstaller.org/</a> 에서 통합 패키지를 다운로드 받아서 설치할수도 있다.<br /><br /><a name='more'></a><br /><br /><span style="background-color: #fff2cc;"><b><span style="color: #660000;">2. 오라클 관련 gem 설치</span></b></span><br /><br />다음을 수행해서 필요한 gem 들을 설치한다.<br /><br />&nbsp; <span style="color: #45818e;">gem install ruby-oci8</span><br /><span style="color: #45818e;">&nbsp; gem install activerecord-oracle_enhanced-adapter</span><br /><br />제대로 설치됬는지 테스트를 해보자. 명령 프롬프트 상에서 다음을 수행해 본다. study/study 는 내 개발 환경에서의 id/pwd이다.<br /><br />&nbsp; <span style="color: #45818e;">D:\MyRubyTest&gt; ruby -r oci8 -e "OCI8.new('study', 'study', 'XE').exec('select sysdate from dual') do |r| puts &nbsp;r.join(' | '); end"</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; 2012-08-14 12:07:40 +0900</span><br />이런 결과가 나온다면 설치는 정상적으로 된 것이다.<br /><br /><b><span style="background-color: #fff2cc; color: #660000;">3. 프로젝트 Gemfile에 gem 추가</span></b><br /><br />RoR 설치후 rails new xxx 등으로 실제 프로젝트를 생성했다고 가정해보자.<br />이제 중요한 사항은, 위에서 필요한 gem 들을 install 하긴 했지만, 프로젝트에서 이를 사용하려면,&nbsp;Gemfile 에 명시해줘야 한다는 것이다.&nbsp;그렇지 않다면, gem을 설치하라는 에러메시지를 보게 될것이다 (그럼, 나처럼.. 이런..분명히 설치 했는데 또? 라며 당황하게 될것이고).<br />Gemfile 에 다음을 추가한다.<br /><br />&nbsp; <span style="color: #45818e;">gem 'ruby-oci8'</span><br /><span style="color: #45818e;">&nbsp; gem 'activerecord-oracle_enhanced-adapter'</span><br /><br />그리고, 사용하지 않을 기존 sqlite3 부분은 주석 처리한다.<br />&nbsp; <span style="color: #45818e;"># gem 'sqlite3'</span><br /><br /><br /><span style="color: #660000;"><b style="background-color: #fff2cc;">4. bundle install 재 실행</b></span><br /><br />&nbsp; 이제 bundle install 을 다시 실행해서, Gemfile의 내용을 반영한다.<br /><br /><b><span style="background-color: #fff2cc; color: #660000;">5. database.yml 수정</span></b><br /><br />다음처럼 수정한다. 개발, 시험,배포의 설정이 구분될수도 있지만, 일단 동일한 설정으로 만들었다.<br /><br />&nbsp; <span style="color: #45818e;">development:</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; adapter: oracle_enhanced</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; database: //localhost:1521/xe</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; username: study</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; password: study</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; test:</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; adapter: oracle_enhanced</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; database: //localhost:1521/xe</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; username: study</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; password: study</span><br /><span style="color: #45818e;"><br /></span><span style="color: #45818e;">&nbsp; production:</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; adapter: oracle_enhanced</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; database: //localhost:1521/xe</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; username: study</span><br /><span style="color: #45818e;">&nbsp; &nbsp; &nbsp; password: study</span><br /><br /><b><span style="background-color: #fff2cc; color: #660000;">6. db migrate 수행</span></b><br /><br />다음을 수행해서 오류없이 종료되었다면, 이제 연동환경이 구성된 것이다.<br /><br />&nbsp; <span style="color: #45818e;">rake db:migrate</span><br /><br />실제로 테이블이 생성되는지 확인 해본다.<br /><br />